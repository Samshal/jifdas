(self.webpackChunkjifdas=self.webpackChunkjifdas||[]).push([[219],{1219:(t,e,a)=>{"use strict";a.d(e,{w:()=>m});var n=a(3559),i=a(4733),s=a(5366),r=a(7320),l=a(3295),o=a(9151),d=a(1116);let c=(()=>{class t{constructor(){this.analysisData={}}ngOnInit(){}ngOnChanges(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-view-single-analysis"]],inputs:{analysisData:"analysisData"},features:[s.TTD],decls:19,vars:5,consts:[["id","kt_content_container",1,"container"],[1,"card"],[1,"card-body"],[1,"mb-5"],[1,"mb-1"],[1,"text-center","mb-5"],[1,"fs-2hx","text-dark"],[1,"text-muted"],[1,"fs-5","text-muted"],[1,"fw-bold"],[1,"row","mb-10"],[1,"col-12"],[3,"innerHtml"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"h3",6),s.TgZ(7,"span",7),s._uU(8),s.qZA(),s._uU(9),s.qZA(),s.TgZ(10,"div",8),s.TgZ(11,"span",9),s._uU(12),s.qZA(),s._UZ(13,"br"),s.TgZ(14,"span"),s._uU(15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",10),s.TgZ(17,"div",11),s._UZ(18,"div",12),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(8),s.hij("#",e.analysisData.GeneralAnalysisId,":"),s.xp6(1),s.hij(" ",e.analysisData.ClassificationName,""),s.xp6(3),s.Oqu(e.analysisData.AccountName),s.xp6(3),s.Oqu(e.analysisData.DateCreated),s.xp6(3),s.Q6J("innerHtml",e.analysisData.AnalysisText,s.oJD))},styles:[""]}),t})();function g(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td",20),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).openAnalysis(e)}),s.TgZ(2,"span",21),s.TgZ(3,"span",22),s._uU(4),s.qZA(),s._uU(5),s.qZA(),s._UZ(6,"div",23),s.qZA(),s.TgZ(7,"td",24),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).openAnalysis(e)}),s.TgZ(8,"span",21),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"td",24),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).openAnalysis(e)}),s._uU(11),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,a=s.oxw(2);s.xp6(4),s.hij("#",t.GeneralAnalysisId,":"),s.xp6(1),s.hij(" ",t.ClassificationName," "),s.xp6(1),s.Q6J("innerHtml",a.preprocess(t.AnalysisText),s.oJD),s.xp6(3),s.Oqu(t.AccountName),s.xp6(2),s.Oqu(t.DateCreated)}}function p(t,e){if(1&t&&(s.TgZ(0,"tbody",18),s.YNc(1,g,12,5,"tr",19),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.currentData)}}function Z(t,e){1&t&&(s.TgZ(0,"tbody"),s.TgZ(1,"tr"),s.TgZ(2,"td",25),s._uU(3,"No incidences available"),s.qZA(),s.qZA(),s.qZA())}function h(t,e){if(1&t&&(s.TgZ(0,"div",26),s.TgZ(1,"div",27),s.TgZ(2,"div",28),s.TgZ(3,"h3",29),s.TgZ(4,"span",22),s._uU(5),s.qZA(),s._uU(6),s.qZA(),s.TgZ(7,"div",30),s.TgZ(8,"ul",31),s.TgZ(9,"li",32),s.TgZ(10,"a",33),s._uU(11,"View Analysis"),s.qZA(),s.qZA(),s.TgZ(12,"li",32),s.TgZ(13,"a",34),s._uU(14,"View Related Incidents"),s.qZA(),s.qZA(),s.TgZ(15,"li",32),s.TgZ(16,"a",35),s._uU(17,"Change Log"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",36),s.TgZ(19,"div",37),s.TgZ(20,"div",38),s._UZ(21,"app-view-single-analysis",39),s.qZA(),s.TgZ(22,"div",40),s._UZ(23,"div",41),s.qZA(),s.TgZ(24,"div",42),s._uU(25," ... "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(5),s.hij("#",t.currentView.GeneralAnalysisId,": "),s.xp6(1),s.hij(" ",t.currentView.ClassificationName,""),s.xp6(15),s.Q6J("analysisData",t.currentView)}}function u(t,e){1&t&&(s.TgZ(0,"div",26),s.TgZ(1,"div",43),s._UZ(2,"img",44),s.TgZ(3,"h3",45),s._uU(4,"Click on an analysis to begin"),s.qZA(),s.qZA(),s.qZA())}function b(t,e){1&t&&(s.TgZ(0,"div",46),s.TgZ(1,"h4",47),s._uU(2,"Add new analysis"),s.qZA(),s.TgZ(3,"button",48),s.NdJ("click",function(){return e.$implicit.dismiss("Cross click")}),s.TgZ(4,"span",49),s._uU(5,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",50),s._UZ(7,"div",51),s.qZA(),s.TgZ(8,"div",52),s.TgZ(9,"button",53),s._uU(10,"Save Analysis"),s.qZA(),s.qZA())}let m=(()=>{class t{constructor(t,e,a){this.serverRequest=t,this.modalService=e,this.events=a,this.globalDateRange={startDate:"",endDate:""},this.performGlobalSearch=!1,this.searchParams={type:"basic",keyword:"",analysisType:"",location:""},this.currentData=[],this.currentView={},this.forReview=!1,this.forDecline=!1,this.analysisLoaded=!1,this.selectedanalysiss={},this.groupSelect=!1,this.dtOptions={paging:!0,lengthChange:!0,pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!0,ajax:(t,e)=>{let a=t.length,n=t.search.value,i=t.start,s=this.globalDateRange.startDate,r=this.globalDateRange.endDate,l=0,o="";this.performGlobalSearch&&(n=this.searchParams.keyword,l=this.searchParams.analysisType,o=this.searchParams.location,""!=this.searchParams.dateRange.startDate&&(s=this.searchParams.dateRange.startDate.format("YYYY-MM-DD"),r=this.searchParams.dateRange.endDate.format("YYYY-MM-DD"))),this.serverRequest.get("general-analysis/analysis/view-analysis?length="+a+"&start="+i+"&search="+n+"&startDate="+s+"&endDate="+r+"&analysisType="+l+"&location="+o).subscribe(t=>{this.performGlobalSearch=!1,this.currentData=[],this.currentData=t.contentData.data,e({recordsTotal:t.contentData.recordsTotal,recordsFiltered:t.contentData.recordsFiltered,data:[]})})},columnDefs:[{orderable:!1,targets:0}],order:[[1,"asc"]]},this.dtTrigger=new n.xQ}ngOnInit(){this.dtTrigger.next(),setTimeout(()=>{this.rerender()},500),this.events.getEvent("perform-global-search").subscribe(t=>{console.log(t),null!==t&&""!=t.type&&(this.searchParams=t,this.performGlobalSearch=!0,this.groupSelect=!1,setTimeout(()=>{this.dtElement.dtInstance.then(t=>{t.ajax.reload()})},800))})}ngAfterViewInit(){this.dtTrigger.next()}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}openAnalysis(t){this.forReview=!1,this.forDecline=!1,this.currentView=t,this.analysisLoaded=!0}openEditor(t){this.modalService.open(t,{backdropClass:"modal-backdrop",size:"vw",scrollable:!0})}broadcastanalysisSelect(){this.events.broadcast("analysis-data-selected",this.selectedanalysiss)}selectAllanalysiss(){for(let t in this.currentData)this.selectedanalysiss[this.currentData[t].analysisId]=this.groupSelect,this.broadcastanalysisSelect()}preprocess(t){return t.replace("h1","p")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(r.I),s.Y36(l.FF),s.Y36(o.n))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-view-analysis"]],viewQuery:function(t,e){if(1&t&&s.Gf(i.G,5),2&t){let t;s.iGM(t=s.CRH())&&(e.dtElement=t.first)}},decls:28,vars:6,consts:[[1,"wrapper","d-flex","flex-column","flex-row-fluid"],[1,"card","rounded-0","bgi-no-repeat","bgi-position-x-end","bgi-size-cover",2,"background-color","#4b5320","background-size","auto 100%"],[1,"card-body","container","pt-10","pb-8"],[1,"d-flex","align-items-center"],[1,"fw-bold","me-3","text-white"],[1,"fw-bold","text-white","opacity-50"],[1,"d-flex","flex-column"],[1,"d-lg-flex","align-lg-items-center"],[1,"row",2,"margin-top","10px"],[1,"col-md-5","table-responsive","right-border",2,"padding-left","20px"],["id","kt_explore_scroll","data-kt-scroll","true","data-kt-scroll-height","auto","data-kt-scroll-wrappers","#kt_explore_body","data-kt-scroll-offset","5px",1,"scroll-y","me-n5","pe-5"],["datatable","",1,"table","table-hover","align-middle","gs-0","gy-4",3,"dtOptions","dtTrigger"],[1,"fw-bolder","text-muted","bg-light"],[1,"min-w-200px"],["style","max-height: 80vh; overflow: scroll;",4,"ngIf"],[4,"ngIf"],["class","col-md-7",4,"ngIf"],["content",""],[2,"max-height","80vh","overflow","scroll"],[4,"ngFor","ngForOf"],[1,"min-w-200px",3,"click"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[1,"text-muted"],[1,"wrap-text","small-text",3,"innerHtml"],[3,"click"],["colspan","3"],[1,"col-md-7"],[1,"card"],[1,"card-header","card-header-stretch"],[1,"card-title"],[1,"card-toolbar"],[1,"nav","nav-tabs","nav-line-tabs","nav-stretch","fs-6","border-0"],[1,"nav-item"],["data-bs-toggle","tab","href","#kt_tab_pane_7",1,"nav-link","active"],["data-bs-toggle","tab","href","#kt_tab_pane_9",1,"nav-link"],["data-bs-toggle","tab","href","#kt_tab_pane_8",1,"nav-link"],[1,"card-body"],["id","myTabContent",1,"tab-content"],["id","kt_tab_pane_7","role","tabpanel",1,"tab-pane","fade","show","active"],[3,"analysisData"],["id","kt_tab_pane_9","role","tabpanel",1,"tab-pane","fade"],[1,"col-12"],["id","kt_tab_pane_8","role","tabpanel",1,"tab-pane","fade"],[1,"col-md-12","mt-10","mb-5","text-center"],["src","assets/media/illustrations/undraw_visual_data_re_mxxo.svg",1,"img-fluid",2,"width","20vw","margin-top","20px"],[1,"text-muted","mt-5"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","editor-container",1,"row"],[1,"modal-footer"],["type","button",1,"btn","btn-success"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"h1",4),s._uU(5,"Analysis Workspace"),s.qZA(),s.TgZ(6,"span",5),s._uU(7,"Analysis & Report Portal"),s.qZA(),s.qZA(),s.TgZ(8,"div",6),s._UZ(9,"div",7),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",8),s.TgZ(11,"div",9),s.TgZ(12,"div",10),s.TgZ(13,"table",11),s.TgZ(14,"thead"),s.TgZ(15,"tr",12),s.TgZ(16,"th",13),s._uU(17,"Analysis"),s.qZA(),s.TgZ(18,"th"),s._uU(19,"Analyst"),s.qZA(),s.TgZ(20,"th"),s._uU(21,"Date"),s.qZA(),s.qZA(),s.qZA(),s.YNc(22,p,2,1,"tbody",14),s.YNc(23,Z,4,0,"tbody",15),s.qZA(),s.qZA(),s.qZA(),s.YNc(24,h,26,3,"div",16),s.YNc(25,u,5,0,"div",16),s.qZA(),s.YNc(26,b,11,0,"ng-template",null,17,s.W1O)),2&t&&(s.xp6(13),s.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),s.xp6(9),s.Q6J("ngIf",0!=(null==e.currentData?null:e.currentData.length)),s.xp6(1),s.Q6J("ngIf",0==(null==e.currentData?null:e.currentData.length)),s.xp6(1),s.Q6J("ngIf",e.analysisLoaded),s.xp6(1),s.Q6J("ngIf",!e.analysisLoaded))},directives:[i.G,d.O5,d.sg,c],styles:[".wrapper[_ngcontent-%COMP%]{width:91vw;padding-left:0}.modal-backdrop[_ngcontent-%COMP%]{background-color:#4b5320}.w-50[_ngcontent-%COMP%]{width:50%!important}.left-border[_ngcontent-%COMP%]{min-height:100vh;border-left:1px solid #4b5320;border-radius:25px 0}.right-border[_ngcontent-%COMP%]{min-height:100vh;border-right:1px solid #4b5320;border-radius:0 25px}#edit-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;min-height:100vh}.wrap-text[_ngcontent-%COMP%]{max-height:80px;overflow:hidden;text-overflow:ellipsis}.small-text[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{font-size:.5em!important}"]}),t})()}}]);
(self.webpackChunkjifdas=self.webpackChunkjifdas||[]).push([[938],{3938:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PublicModule:()=>p});var n=r(1116),o=r(1462),s=r(5366),i=r(7320),a=r(9151),l=r(7703),c=r(5943);function g(e,t){1&e&&(s.TgZ(0,"div",23),s.TgZ(1,"div",24),s._uU(2," Invalid Username and/or Password. Please try again. "),s.qZA(),s.qZA())}function d(e,t){1&e&&(s.TgZ(0,"span",25),s._uU(1,"Continue"),s.qZA())}function u(e,t){1&e&&(s.TgZ(0,"span",26),s._uU(1,"Please wait... "),s._UZ(2,"span",27),s.qZA())}const h=[{path:"",pathMatch:"full",redirectTo:"sign-in"},{path:"sign-in",component:(()=>{class e{constructor(e,t,r,n){this.serverRequest=e,this.events=t,this.router=r,this.storage=n,this.username="",this.password="",this.showLoginError=!1,this.showLoginProcessing=!1}ngOnInit(){}login(){this.showLoginProcessing=!0,this.serverRequest.post("login",{username:this.username,password:this.password}).subscribe(e=>{if(this.showLoginProcessing=!1,0==e.contentData.status)this.showLoginError=!0;else{this.showLoginError=!1;const t=e.contentData.userId,r=e.contentData.sessionData.token,n=e.contentData.accountType,o=r+","+e.contentData.sessionId+","+t;this.userId=t,this.serverRequest.setHeaders({Authorization:o}),this.storage.setItem("sessionInfo",JSON.stringify({userId:t,token:r,username:this.username})),this.router.navigate(1==n?["/field/new-incidence"]:2==n?["/data-office/field-reports"]:["/user"])}})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(i.I),s.Y36(a.n),s.Y36(l.F0),s.Y36(c.V))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-sign-in"]],decls:30,vars:5,consts:[["id","container",1,"d-flex","flex-column","flex-column-fluid","bgi-position-y-bottom","position-x-center","bgi-no-repeat","bgi-size-contain","bgi-attachment-fixed",2,"background-size","cover","background-image","url(../../../assets/media/misc/dark.jpg)"],[1,"d-flex","flex-center","flex-column","flex-column-fluid","p-5","pb-lg-20"],["href","#",1,"mb-12",2,"margin-left","250px"],["alt","Logo","src","../../../assets/media/logos/dia-logo.png","width","20%","height","20%",1,"img-fluid"],["alt","Logo","src","../../../assets/media/logos/logo.png",1,"img-fluid"],[1,"w-lg-500px","bg-body","rounded","shadow-sm","p-10","p-lg-15","mx-auto"],["novalidate","novalidate","id","kt_sign_in_form","action","#",1,"form","w-100"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],[1,"text-gray-400","fw-bold","fs-4"],["href","sign-up.html",1,"link-primary","fw-bolder"],["class","row",4,"ngIf"],[1,"fv-row","mb-10"],[1,"form-label","fs-6","fw-bolder","text-dark"],["type","text","required","","name","username",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"d-flex","flex-stack","mb-2"],[1,"form-label","fw-bolder","text-dark","fs-6","mb-0"],["href","password-reset.html",1,"link-primary","fs-6","fw-bolder"],["type","password","name","password","placeholder","Password","required","",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"text-center"],["type","submit","id","kt_sign_in_submit",1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"click"],["class","indicator-label",4,"ngIf"],["class","indicator-labbel",4,"ngIf"],[1,"row"],["role","alert",1,"alert","alert-danger"],[1,"indicator-label"],[1,"indicator-labbel"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"a",2),s._UZ(3,"img",3),s._UZ(4,"img",4),s.qZA(),s.TgZ(5,"div",5),s.TgZ(6,"form",6),s.TgZ(7,"div",7),s.TgZ(8,"h1",8),s._uU(9,"Sign In to your Account"),s.qZA(),s.TgZ(10,"div",9),s._uU(11,"Need help? "),s.TgZ(12,"a",10),s._uU(13,"Contact an Admin"),s.qZA(),s.qZA(),s.qZA(),s.YNc(14,g,3,0,"div",11),s.TgZ(15,"div",12),s.TgZ(16,"label",13),s._uU(17,"Username"),s.qZA(),s.TgZ(18,"input",14),s.NdJ("ngModelChange",function(e){return t.username=e}),s.qZA(),s.qZA(),s.TgZ(19,"div",12),s.TgZ(20,"div",15),s.TgZ(21,"label",16),s._uU(22,"Password"),s.qZA(),s.TgZ(23,"a",17),s._uU(24,"Forgot Password ?"),s.qZA(),s.qZA(),s.TgZ(25,"input",18),s.NdJ("ngModelChange",function(e){return t.password=e}),s.qZA(),s.qZA(),s.TgZ(26,"div",19),s.TgZ(27,"button",20),s.NdJ("click",function(){return t.login()}),s.YNc(28,d,2,0,"span",21),s.YNc(29,u,3,0,"span",22),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(14),s.Q6J("ngIf",t.showLoginError),s.xp6(4),s.Q6J("ngModel",t.username),s.xp6(7),s.Q6J("ngModel",t.password),s.xp6(3),s.Q6J("ngIf",!t.showLoginProcessing),s.xp6(1),s.Q6J("ngIf",t.showLoginProcessing))},directives:[o._Y,o.JL,o.F,n.O5,o.Fj,o.Q7,o.JJ,o.On],styles:["#container[_ngcontent-%COMP%]{overflow:hidden!important;height:100vh}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.Bz.forChild(h)],l.Bz]}),e})(),p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.ez,f,o.u5]]}),e})()},9151:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var n=r(8512),o=r(5366);let s=(()=>{class e{constructor(){this.behaviorSubjects=new Map}getBehaviorSubject(e){let t=this.behaviorSubjects.get(e);return t||(t=new n.X(null),this.behaviorSubjects.set(e,t)),t}broadcast(e,t){this.getBehaviorSubject(e).next(t)}getEvent(e){return this.getBehaviorSubject(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7320:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var n=r(529),o=r(5366),s=r(2693);let i=(()=>{class e{constructor(e){this.http=e,this.serverUrlEndpoint=n.N.serverUrlEndpoint,this.headers={}}setHeaders(e={}){this.headers=e}get(e){return this.http.get(this.serverUrlEndpoint+e)}post(e,t){return this.http.post(this.serverUrlEndpoint+e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5943:(e,t,r)=>{"use strict";r.d(t,{V:()=>s});var n=r(8512),o=r(5366);let s=(()=>{class e{constructor(){console.warn("create storage service"),this.behaviorSubjects=new Map}getBehaviorSubject(e){let t=this.behaviorSubjects.get(e);return t||(t=new n.X(null),this.behaviorSubjects.set(e,t)),t}getItem(e){const t=this.getBehaviorSubject(e),r=localStorage.getItem(e);return t.next(r),t}setItem(e,t){localStorage.setItem(e,t),this.getBehaviorSubject(e).next(t)}removeItem(e){localStorage.removeItem(e),this.getBehaviorSubject(e).next(null)}clear(){localStorage.clear(),this.behaviorSubjects.forEach(e=>{e.next(null)}),console.log("local storage cleared")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
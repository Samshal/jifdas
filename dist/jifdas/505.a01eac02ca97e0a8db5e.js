(self.webpackChunkjifdas=self.webpackChunkjifdas||[]).push([[505],{4505:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PublicModule:()=>h});var o=n(1116),r=n(1462),s=n(5366),i=n(7320);let a=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=n(1190),c=n(5943);function g(e,t){1&e&&(s.TgZ(0,"div",22),s.TgZ(1,"div",23),s._uU(2," Invalid Username and/or Password. Please try again. "),s.qZA(),s.qZA())}function d(e,t){1&e&&(s.TgZ(0,"span",24),s._uU(1,"Continue"),s.qZA())}function u(e,t){1&e&&(s.TgZ(0,"span",25),s._uU(1,"Please wait... "),s._UZ(2,"span",26),s.qZA())}const f=[{path:"",pathMatch:"full",redirectTo:"sign-in"},{path:"sign-in",component:(()=>{class e{constructor(e,t,n,o){this.serverRequest=e,this.events=t,this.router=n,this.storage=o,this.username="",this.password="",this.showLoginError=!1,this.showLoginProcessing=!1}ngOnInit(){}login(){this.showLoginProcessing=!0,this.serverRequest.post("login",{username:this.username,password:this.password}).subscribe(e=>{if(this.showLoginProcessing=!1,0==e.contentData.status)this.showLoginError=!0;else{this.showLoginError=!1;const t=e.contentData.userId,n=e.contentData.sessionData.token,o=e.contentData.accountType,r=n+","+e.contentData.sessionId+","+t;this.userId=t,this.serverRequest.setHeaders({Authorization:r}),this.storage.setItem("sessionInfo",JSON.stringify({userId:t,token:n,username:this.username})),this.router.navigate(1==o?["/field/new-incidence"]:2==o?["/data-office/field-reports"]:["/user"])}})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(i.I),s.Y36(a),s.Y36(l.F0),s.Y36(c.V))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-sign-in"]],decls:29,vars:5,consts:[["id","container",1,"d-flex","flex-column","flex-column-fluid","bgi-position-y-bottom","position-x-center","bgi-no-repeat","bgi-size-contain","bgi-attachment-fixed",2,"background-size","cover","background-image","url(../../../assets/media/misc/dark.jpg)"],[1,"d-flex","flex-center","flex-column","flex-column-fluid","p-5","pb-lg-20"],["href","#",1,"mb-12"],["alt","Logo","src","../../../assets/media/logos/logo.png",1,"img-fluid"],[1,"w-lg-500px","bg-body","rounded","shadow-sm","p-10","p-lg-15","mx-auto"],["novalidate","novalidate","id","kt_sign_in_form","action","#",1,"form","w-100"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],[1,"text-gray-400","fw-bold","fs-4"],["href","sign-up.html",1,"link-primary","fw-bolder"],["class","row",4,"ngIf"],[1,"fv-row","mb-10"],[1,"form-label","fs-6","fw-bolder","text-dark"],["type","text","required","","name","username",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"d-flex","flex-stack","mb-2"],[1,"form-label","fw-bolder","text-dark","fs-6","mb-0"],["href","password-reset.html",1,"link-primary","fs-6","fw-bolder"],["type","password","name","password","placeholder","Password","required","",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"text-center"],["type","submit","id","kt_sign_in_submit",1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"click"],["class","indicator-label",4,"ngIf"],["class","indicator-labbel",4,"ngIf"],[1,"row"],["role","alert",1,"alert","alert-danger"],[1,"indicator-label"],[1,"indicator-labbel"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"a",2),s._UZ(3,"img",3),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"form",5),s.TgZ(6,"div",6),s.TgZ(7,"h1",7),s._uU(8,"Sign In to your Account"),s.qZA(),s.TgZ(9,"div",8),s._uU(10,"Need help? "),s.TgZ(11,"a",9),s._uU(12,"Contact an Admin"),s.qZA(),s.qZA(),s.qZA(),s.YNc(13,g,3,0,"div",10),s.TgZ(14,"div",11),s.TgZ(15,"label",12),s._uU(16,"Username"),s.qZA(),s.TgZ(17,"input",13),s.NdJ("ngModelChange",function(e){return t.username=e}),s.qZA(),s.qZA(),s.TgZ(18,"div",11),s.TgZ(19,"div",14),s.TgZ(20,"label",15),s._uU(21,"Password"),s.qZA(),s.TgZ(22,"a",16),s._uU(23,"Forgot Password ?"),s.qZA(),s.qZA(),s.TgZ(24,"input",17),s.NdJ("ngModelChange",function(e){return t.password=e}),s.qZA(),s.qZA(),s.TgZ(25,"div",18),s.TgZ(26,"button",19),s.NdJ("click",function(){return t.login()}),s.YNc(27,d,2,0,"span",20),s.YNc(28,u,3,0,"span",21),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(13),s.Q6J("ngIf",t.showLoginError),s.xp6(4),s.Q6J("ngModel",t.username),s.xp6(7),s.Q6J("ngModel",t.password),s.xp6(3),s.Q6J("ngIf",!t.showLoginProcessing),s.xp6(1),s.Q6J("ngIf",t.showLoginProcessing))},directives:[r._Y,r.JL,r.F,o.O5,r.Fj,r.Q7,r.JJ,r.On],styles:["#container[_ngcontent-%COMP%]{overflow:hidden!important;height:100vh}"]}),e})()}];let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.Bz.forChild(f)],l.Bz]}),e})(),h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.ez,m,r.u5]]}),e})()},5943:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var o=n(8512),r=n(5366);let s=(()=>{class e{constructor(){console.warn("create storage service"),this.behaviorSubjects=new Map}getBehaviorSubject(e){let t=this.behaviorSubjects.get(e);return t||(t=new o.X(null),this.behaviorSubjects.set(e,t)),t}getItem(e){const t=this.getBehaviorSubject(e),n=localStorage.getItem(e);return t.next(n),t}setItem(e,t){localStorage.setItem(e,t),this.getBehaviorSubject(e).next(t)}removeItem(e){localStorage.removeItem(e),this.getBehaviorSubject(e).next(null)}clear(){localStorage.clear(),this.behaviorSubjects.forEach(e=>{e.next(null)}),console.log("local storage cleared")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);